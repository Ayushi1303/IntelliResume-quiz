{% extends "base.html" %}
{% block title %}IntelliResume â€” Quiz{% endblock %}
{% block content %}
<div class="card">
  <div class="card-header">
    <h2>Answer the Quiz</h2>
  </div>
  <div class="card-body">
    {% if quiz_id %}
    <p class="meta" style="margin-top:-6px; margin-bottom:12px;">Quiz ID: <code>{{ quiz_id[-8:] if quiz_id|length > 8 else quiz_id }}</code></p>
    {% endif %}
    <form id="quizForm" method="POST">
      {% for q in questions %}
        {% set i = loop.index0 %}
        <div class="q">
          <p>Q{{ i+1 }} <span class="meta">(Skill: {{ q.skill }})</span></p>
          <p>{{ q.question }}</p>
          {% for option in q.options %}
            {% set j = loop.index0 %}
            <label>
              <input type="radio" name="q{{ i }}" value="{{ ['A','B','C','D'][j] }}" required>
              {{ ['A','B','C','D'][j] }}) {{ option }}
            </label>
          {% endfor %}
        </div>
        <div class="divider"></div>
      {% endfor %}
      <div class="actions">
        <button id="submitBtn" class="btn" type="submit">Submit Quiz</button>
      </div>
    </form>
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function(){
  const form = document.getElementById('quizForm');
  const submitBtn = document.getElementById('submitBtn');
  if(form && submitBtn){
    form.addEventListener('submit', function(){
      submitBtn.disabled = true;
      submitBtn.textContent = 'Submitting...';
    });
  }
});
</script>
{% endblock %}
