{% extends "base.html" %}
{% block title %}IntelliResume — Results{% endblock %}
{% block content %}
<div class="card">
  <div class="card-header">
    <h2>Quiz Results</h2>
  </div>
  <div class="card-body">
    <div class="summary">
      <div><strong>Your Score:</strong> {{ score }} / {{ total }}</div>
      <div class="badge">{{ (score / (total or 1) * 100) | round(1) }}%</div>
    </div>
    <div class="meta" style="margin-top:16px; font-weight:600;">Detailed Feedback</div>
    {% for res in results %}
      <div class="question">
        <h4>Q{{ loop.index }} <span class="meta">(Skill: {{ res.skill }})</span></h4>
        <p style="margin:0 0 6px 0">{{ res.question }}</p>
        <p style="margin:0">
          Your Answer:
          {% if res.is_correct %}
            <span class="correct">✅ {{ res.user_answer }}</span>
          {% else %}
            <span class="wrong">❌ {{ res.user_answer }}</span>
            <br><strong>Correct Answer:</strong> <span class="correct">{{ res.correct_answer }}</span>
            {% if res.explanation %}
              <br><strong>Explanation:</strong> {{ res.explanation }}
            {% endif %}
          {% endif %}
        </p>
      </div>
    {% endfor %}
    <div class="actions">
      <a class="btn" href="{{ url_for('quiz') }}">Try Again</a>
      <a class="btn secondary" href="{{ url_for('resources') }}">Learning Resources</a>
    </div>
  </div>
</div>
{% endblock %}
